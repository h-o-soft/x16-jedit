# jedit for Commander X16

[English](README.md) | 日本語

Commander X16向けのSKK風日本語漢字入力が可能な簡易テキストエディタです。

## 概要

jeditは、Commander X16向けに開発された日本語対応テキストエディタです。SKK方式の漢字入力システムを実装しており、日本語の入力と編集が可能です。

## ⚠️ 注意事項

このソフトウェアは開発中のベータ版であり、以下のような重大な問題が発生する可能性があります：

- 予期せぬファイルの消失
- システムの不安定化
- 編集中のデータの破損
- その他の予期せぬ動作

使用前に必ず以下の対策を行ってください：

- 重要なファイルのバックアップを取る
- クリティカルな環境での使用は避ける
- 異常が発生した場合はすぐにプログラムを終了する

これらの問題により発生したいかなる損害についても、開発者は責任を負いかねます。

## 機能

### 日本語入力
- SKK方式による日本語漢字入力
  - ひらがな・カタカナ入力
  - 通常の漢字変換
  - 送り仮名開始位置指定による漢字変換
- シンプルなテキストエディタ機能
  - テキストの入力・編集
  - ファイルの保存・読み込み

## 必要環境

- Commander X16実機またはエミュレータ
- 以下の必要ファイル：
  - `jedit.prg`: エディタ本体
  - `skkdicm.bin`: SKK辞書ファイル（後述の手順で生成）
  - `jfont.bin`: 日本語フォントファイル（後述の手順で生成）

## インストール方法

### 1. 辞書ファイルの生成

`skkdicm.bin`は以下の手順で生成します：

1. `dicconv/`ディレクトリに移動
2. SKK辞書ファイル`SKK-JISYO.M`を用意（EUC-JP形式）
3. `python dicconv.py`を実行
4. 生成された`skkdicm.bin`をjeditと同じディレクトリに配置

### 2. フォントファイルの生成

`jfont.bin`は以下の手順で生成します：

1. `fontconv/`ディレクトリに移動
2. 以下のフォント画像を用意：
   - `k8x12_jisx0201.png`: JIS X 0201文字セット用（4x12ドット）
   - `k8x12_jisx0208.png`: JIS X 0208文字セット用（8x12ドット）
3. `python mkfont.py`を実行
4. 生成された`jfont.bin`をjeditと同じディレクトリに配置

漢字フォント「k8x12」は、下記サイトで入手してください:

https://littlelimit.net/k8x12.htm

### 3. ファイルの配置

生成したファイルとjedit本体を以下のように配置します：

```
Commander X16のストレージ
├── jedit.prg    # エディタ本体
├── skkdicm.bin  # 変換辞書
└── jfont.bin    # フォントデータ
```

## 使い方

### 基本的な操作

- 起動方法: `LOAD "JEDIT.PRG"`から`RUN`
- 漢字入力: 「Ctrl + j」で漢字入力モードに入る
- 半角入力: 漢字入力モード時に「l」キーで半角入力モードに入る
- ひらがな/カタカナ切り替え: 漢字入力モード時に「q」キーでひらがな/カタカナ切り替え
- 上書き/挿入モード切り替え: 「Ctrl + O」でインサートモードを切り替え
- セーブ: 「Ctrl + X」でセーブして終了するか確認
- ロード: 「Ctrl + R」でファイル名を入力して読み込み
- 漢字変換: 
  - 大文字で始まる読みを入力（例：`Kanji`）
  - スペースキーで変換
  - スペースキーで次候補、Enterで確定

### SKK入力の例

- `Kanji` → 漢字
- `KanJi` → 感じ
- `TukaU` → 使う

## 開発者向け情報

### ビルド方法

ビルドには[Prog8コンパイラ](https://github.com/irmen/prog8)が必要です。以下のコマンドでビルドできます:

```
java -jar /usr/local/bin/prog8c-11.1-all.jar -target cx16 -dontsplitarrays jedit.p8
```

### プロジェクト構成

- ソースファイル:
  - `jedit.p8`: メインのエディタプログラム
  - `tinyskk.p8`: SKK風漢字変換システムの実装
  - `jtxt.p8`: 日本語テキスト表示
  - `bmem.p8`: バンクメモリ管理
- 変換ツール:
  - `dicconv/`: 辞書変換ツール
    - `dicconv.py`: SKK辞書をバイナリ形式に変換するツール
  - `fontconv/`: フォント変換ツール
    - `mkfont.py`: フォント画像をバイナリ形式に変換するツール
  - `jeditc/`: 追加のコンパイルツール

## ライセンス

本ソフトウェアはMITライセンスの下で公開されています。詳細は[LICENSE](LICENSE)ファイルをご覧ください。

## 謝辞

本ソフトウェアの開発にあたり、以下の方々に感謝いたします:

- Commander X16開発チームの皆様
  - 素晴らしいレトロコンピュータプラットフォームを提供していただき、ありがとうございます
- 門真 なむ氏
  - 美しい日本語フォントを提供していただき、ありがとうございます
